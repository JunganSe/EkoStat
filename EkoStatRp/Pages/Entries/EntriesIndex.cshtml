@page "/Entries"
@model EkoStatRp.Pages.Entries.EntriesIndex
@{
    ViewData["Title"] = "Entries";
    ViewData["ShowEditButtons"] = true;
    int entriesCount = Model.EntryGroups.Sum(eg => eg.Entries.Count);
    DateTime? earliestTimestamp = (entriesCount > 0)
        ? Model.EntryGroups.Select(eg => eg.Timestamp).Min() : null;
    DateTime? latestTimestamp = (entriesCount > 0)
        ? Model.EntryGroups.Select(eg => eg.Timestamp).Max() : null;
}

<h1>Entries</h1>
<a asp-page="@Constants.RazorPages.EntriesAdd">Add entries</a>
<hr />

<h2>Filter</h2>
<form method="post">
    <partial name="@Constants.PartialViews.FilterEntries" model="@Model.FilterViewModel" />
    <button type="submit">Filter</button>
</form>
<hr />

<h2>Entries</h2>
<p>
    @entriesCount entries 
    @if (entriesCount > 0)
    {
        <span>from @earliestTimestamp until @latestTimestamp</span>
    }
</p>
<partial name="@Constants.PartialViews.EntriesGroupedByTimestamp" model="@Model.EntryGroups" />



@section Scripts {
    <script src="~/js/entries-index.js"></script>
}
